<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FPS Test Stable</title>
<style>
body { margin:0; overflow:hidden; background:black; }
#overlay {
position:absolute;
width:100%;
height:100%;
background:black;
color:white;
display:flex;
align-items:center;
justify-content:center;
font-size:40px;
cursor:pointer;
z-index:10;
}
</style>
</head>
<body>

<div id="overlay">Click To Enter</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>

console.log("THREE exists:", typeof THREE);

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x222222);

const camera = new THREE.PerspectiveCamera(
75,
window.innerWidth/window.innerHeight,
0.1,
1000
);

camera.position.set(0,5,10);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,10,5);
scene.add(light);

const floor = new THREE.Mesh(
new THREE.BoxGeometry(50,1,50),
new THREE.MeshStandardMaterial({color:0x444444})
);
floor.position.y = -1;
scene.add(floor);

const cube = new THREE.Mesh(
new THREE.BoxGeometry(3,3,3),
new THREE.MeshStandardMaterial({color:0xff0000})
);
scene.add(cube);

/* ===== POINTER LOCK MANUAL ===== */

const overlay = document.getElementById("overlay");

overlay.addEventListener("click", () => {
document.body.requestPointerLock();
});

document.addEventListener("pointerlockchange", () => {
if (document.pointerLockElement === document.body) {
overlay.style.display = "none";
}
});

/* ===== SIMPLE MOUSE LOOK ===== */

let yaw = 0;
let pitch = 0;

document.addEventListener("mousemove", (event) => {
if (document.pointerLockElement === document.body) {
yaw -= event.movementX * 0.002;
pitch -= event.movementY * 0.002;

pitch = Math.max(-Math.PI/2, Math.min(Math.PI/2, pitch));

camera.rotation.order = "YXZ";
camera.rotation.y = yaw;
camera.rotation.x = pitch;
}
});

/* ===== BASIC MOVEMENT ===== */

let keys = {};

document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

function animate(){
requestAnimationFrame(animate);

const speed = 0.2;

if(keys["KeyW"]) camera.position.z -= speed;
if(keys["KeyS"]) camera.position.z += speed;
if(keys["KeyA"]) camera.position.x -= speed;
if(keys["KeyD"]) camera.position.x += speed;

cube.rotation.y += 0.01;

renderer.render(scene, camera);
}

animate();

</script>

</body>
</html>
